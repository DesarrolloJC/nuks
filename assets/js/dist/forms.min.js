const validar={letras:"^$|^[A-Za-zñÑáéíóúüÁÉÍÓÚÜ ]+$",numletras:"^$|^[A-Za-z0-9ñÑáéíóúüÁÉÍÓÚ#\\.,:_/\\-+ ]+$",texto:"^$|^[A-Za-z0-9ñÑáéíóúüÁÉÍÓÚÜ\\.,:;_\\-+/*=<>#$%@&¢£¥€©®[\\]{}()¿?¡!\\\"\\' ]+$",textarea:"^$|^[A-Za-z0-9ñÑáéíóúüÁÉÍÓÚÜ\\.,:;_\\-+/*=<>#$%@&¢£¥€©®[\\]{}()¿?¡!\\\"\\'\\n ]+$",correo:"^$|^[A-Za-z0-9\\-_\\.]+@[a-z0-9]+(\\.mx|\\.com|\\.com\\.mx|\\.net|\\.net\\.mx|\\.es|\\.org\\.mx|\\.org|\\.gob|\\.gob\\.mx)$",web:"^$|^(https:\\/\\/|http:\\/\\/){0,1}[A-Za-z0-9\\.]+(\\.mx|\\.com|\\.com\\.mx|\\.net|\\.net\\.mx|\\.es|\\.org\\.mx|\\.org|\\.gob|\\.gob\\.mx){1}[\\/A-Za-z0-9=?&\\.]*$",telefono:"^$|^[0-9 ]{10,15}$",clave:"^$|^[a-zA-Z0-9]+$",fecha:"^$|^(19|20)[0-9]{2}\\-(01|02|03|04|05|06|07|08|09|10|11|12)\\-[0-9]{2}$",hora:"^$|^[0-9]{2}:{1}[0-9]{2}:{0,1}[0-9]{0,2}$",entero:"^$|^[0-9]+$",decimal:"^$|^[0-9]+\\.{0,1}[0-9]{0,4}$",password:"^$|^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&#=+\\-])[A-Za-z\\d@$!%*?&#=+\\-]{8,}$"};var editorck=!1,textBtn="";function sendToServer(formulario,url,method,datos){$.ajax({url:url,type:method,data:datos,cache:!1,processData:!1,contentType:!1,statusCode:{504:function(){alerta("Error","Se agotó el tiempo, intentalo más tarde","error","Aceptar")}},beforeSend:function(){DescButtonsV(formulario),DisplayProgBar(formulario)},complete:function(e){ActButtonsV(formulario),editorck=!1},error:function(e){!e.responseText.includes("error")&&!e.responseText.includes("warning")&&e.responseText.includes("retry")?alerta("Error",e.responseText,"warning","Aceptar"):alerta("Error",e.responseText,"error","Aceptar")},success:function(response){alerta(response.title,response.msg,response.class,"Aceptar"),response.success&&formulario.trigger("reset"),eval(response.final),setTimeout(function(){formulario.trigger("reset")},3500)}})}function DescButtonsV(e){textBtn=e.find("button[type='submit']").html(),e.find("button[type='submit']").html(""),e.find("button[type='submit']").html('<img width="50px" src="../../img/loading.gif">'),e.find("button[type='submit']").attr("disabled","disabled"),e.find("button[type='reset']").attr("disabled","disabled")}function DisplayProgBar(e){var t,r;document.getElementById("progressBar")||(t=document.createElement("div"),r=document.createElement("div"),t.classList.add("progress"),r.classList.add("progress-bar"),t.setAttribute("id","progressBarContainer"),r.setAttribute("id","progressBar"),t.appendChild(r))}function ActButtonsV(e){e.find("button[type='submit']").html(""),e.find("button[type='submit']").html(textBtn),e.find("button[type='submit']").prop("disabled",null),e.find("button[type='reset']").prop("disabled",null)}function EsValido(e){var s=!0;return e.find(":input").each(function(){var e=$(this).prop("type"),t=$(this).val(),r=$(this).data("msg"),a=!0;switch(e){case"password":a=CheckRegex(validar.password,t);break;case"number":a=CheckRegex(validar.entero,t);break;case"email":a=CheckRegex(validar.correo,t);break;case"tel":a=CheckRegex(validar.telefono,t);break;case"text":var o=$(this).data("regla"),a=CheckRegex(validar[o],t);break;case"file":a=!0;break;case"textarea":"ckeditor"==$(this).attr("class")?editorck=a=!0:a=CheckRegex(validar.textarea,t)}if(!a)return alerta("Error!",r,"warning"),$(this).focus(),s=!1}),s}function CheckRegex(e,t){return RegExp(e,"i").test(t)}$("form").submit(function(e){e.preventDefault();var t=$(this),r=t.attr("method"),a=t.attr("action"),e=t.data("confirmar");if(EsValido(t)){if(editorck)for(var o in CKEDITOR.instances)CKEDITOR.instances[o].updateElement();var s="GET"==r||"get"==r?t.serialize():new FormData(t[0]);e?(e=t.data("msg"),Swal.fire({title:e,text:"¿Los datos ingresados son correctos?",type:"question",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",preConfirm:e=>{},allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{e.value&&sendToServer(t,a,r,s)})):sendToServer(t,a,r,s)}});